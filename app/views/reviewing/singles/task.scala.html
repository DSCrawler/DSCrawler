@import _root_.async.work.WorkStatus
@import _root_.async.work.WorkType
@(task : _root_.persistence.tasks.Task)

<div class="review-task">
	<h3>Task @task.getTaskId()</h3>
	<p>WorkType : @task.getWorkType()</p>
	<p>WorkStatus : @task.getWorkStatus()</p>
	<p>Note : @task.getNote()</p>
	<table>
		@for((key,value) <- task.getContextItems()){
			<tr>
				<td>@key</td>
				<td>@value</td>
			</tr>
		}
	</table>
	<form class="task-review-form" method="POST">
	
		<input type="hidden" name="taskId" value="@task.getTaskId()"/>
		@if(task.getTaskSet() != null){
			<input type="hidden" name="taskSetId" value="@task.getTaskSet().getTaskSetId()"/>
		}
		@if(task.getSupertask() != null){
			<input type="hidden" name="supertaskId" value="@task.getSupertask().getTaskId()"/>
		}
		
		@for((key,value) <- task.getContextItems()){
			@reviewing.singles.contextItem(key, value)
		}
	</form>
	@if(task.getSubtasks().size() > 0){
		<div class="subtasks">
		<h3>Subtasks</h3>
			@for(subtask <- task.getSubtasks()){
				@if(subtask.getWorkStatus() == WorkStatus.NEEDS_REVIEW){
				
					<div class="indented subtask">
						@reviewing.singles.task(subtask)
						<div class="context-items">
							@for((key, value) <- subtask.getContextItems()){
								@reviewing.singles.contextItem(key, value)
							}
						</div>
					</div>
				}
			}
		</div>
	
	}
	
</div>